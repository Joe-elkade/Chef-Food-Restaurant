<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CHEF FOOD Shop - Checkout</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="assets/images/favicon.png" type="image/png">
</head>
<body>
  <header>
    <div class="container header-inner">
      <a href="index.html" class="logo">CHEF FOOD Shop</a>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html">Products</a></li>
          <li><a href="offers.html">Offers</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
      <div class="header-controls">
        <button id="theme-toggle" aria-label="Toggle theme">Dark</button>
        <button class="cart-btn" onclick="location.href='cart.html'" aria-label="View cart">ðŸ›’ <span class="cart-count" style="display:none">0</span></button>
        <button id="hamburger" class="hamburger" aria-label="Menu">â˜°</button>
      </div>
    </div>

    <div id="mobile-nav" class="mobile-nav container">
      <a href="index.html">Home</a> |
      <a href="products.html">Products</a> |
      <a href="offers.html">Offers</a> |
      <a href="about.html">About</a> |
      <a href="contact.html">Contact</a>
    </div>
  </header>

  <main>
    <section class="container">
      <h2>Checkout</h2>

      <div class="about">
        <form id="checkout-form" onsubmit="event.preventDefault(); handleCheckout()">
          <label for="fullname">Full name</label>
          <input id="fullname" name="fullname" type="text" required autocomplete="name" />

          <label for="address">Address</label>
          <input id="address" name="address" type="text" required autocomplete="street-address" />

          <label for="phone">Phone</label>
          <input id="phone" name="phone" type="tel" required autocomplete="tel" pattern="[\d\s\-\+\$\$]+" title="Please enter a valid phone number" />

          <div style="margin-top:12px;">
            <strong>Order Summary</strong>
            <table class="cart-table" style="margin-top:8px;" aria-label="Order summary">
              <thead>
                <tr>
                  <th scope="col">Product</th>
                  <th scope="col">Qty</th>
                  <th scope="col">Subtotal</th>
                </tr>
              </thead>
              <tbody id="cart-list-checkout"></tbody>
            </table>
            <div class="cart-total" aria-live="polite" aria-atomic="true">Total: <span id="cart-total-checkout">0.00 L.E</span></div>
          </div>

          <button class="btn" type="submit" style="margin-top:14px;">Place Order (Demo)</button>
        </form>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-inner">
      <div class="socials">
        <a href="#" aria-label="Facebook">Facebook</a>
        <a href="#" aria-label="Instagram">Instagram</a>
        <a href="#" aria-label="Twitter">Twitter(X)</a>
      </div>
      <p>&copy; 2025 CHEF FOOD Shop. All Rights Reserved.</p>
    </div>
  </footer>

  <script src="js/script.js"></script>
  <script>
    function handleCheckout() {
      const fullname = document.getElementById('fullname').value.trim();
      if (!fullname) {
        alert('Please enter your full name');
        return;
      }
      const address = document.getElementById('address').value.trim();
      if (!address) {
        alert('Please enter your address');
        return;
      }
      const phone = document.getElementById('phone').value.trim();
      if (!phone) {
        alert('Please enter your phone number');
        return;
      }

      const cart = window.CHEF.getCart();
      if (!cart.length) {
        alert('Your cart is empty');
        return;
      }

      window.CHEF.showToast('Order placed â€” demo only');
      localStorage.removeItem('cheffood_cart_v1');
      window.CHEF.updateCartCount();

      setTimeout(() => {
        location.href = 'index.html';
      }, 900);
    }

    function renderCheckoutSummary() {
      const cart = window.CHEF.getCart();
      const tbody = document.getElementById('cart-list-checkout');
      const totalEl = document.getElementById('cart-total-checkout');
      if (!tbody || !totalEl) return;

      tbody.innerHTML = '';
      if (cart.length === 0) {
        tbody.innerHTML = '<tr><td colspan="3">No items in cart</td></tr>';
        totalEl.textContent = '0.00 L.E';
        return;
      }

      let total = 0;
      cart.forEach(item => {
        const subtotal = item.qty * item.price;
        total += subtotal;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${item.title}</td>
          <td>${item.qty}</td>
          <td>${subtotal.toFixed(2)} L.E</td>
        `;
        tbody.appendChild(tr);
      });

      totalEl.textContent = total.toFixed(2) + ' L.E';
    }

    window.addEventListener('DOMContentLoaded', () => {
      renderCheckoutSummary();
    });
  </script>
</body>

</html>

